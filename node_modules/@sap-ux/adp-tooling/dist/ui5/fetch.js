"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchPublicVersions = fetchPublicVersions;
exports.fetchInternalVersions = fetchInternalVersions;
const constants_1 = require("../base/constants");
/**
 * Fetches public UI5 version data from the SAP CDN.
 *
 * @returns {Promise<UI5Version>} A promise that resolves to the UI5 version data object.
 * @throws Will throw an error if the fetch fails.
 */
async function fetchPublicVersions() {
    const response = await fetch(constants_1.UI5_VERSIONS_CDN_URL);
    if (!response.ok) {
        throw new Error(`Failed to fetch public UI5 versions. Status: ${response.status}`);
    }
    return response.json();
}
/**
 * Fetches internal UI5 versions from the Neo CDN and maps them to formatted version strings.
 *
 * @param {string} latestVersion - The latest public UI5 version.
 * @returns {Promise<string[]>} A promise that resolves to an array of formatted internal version strings.
 */
async function fetchInternalVersions(latestVersion) {
    const response = await fetch(constants_1.UI5_VERSIONS_NEO_CDN_URL);
    const data = await response.json();
    return data?.routes?.map((route) => {
        return route.target.version === latestVersion
            ? `${route.target.version} ${constants_1.LATEST_VERSION}`
            : route.target.version;
    });
}
//# sourceMappingURL=fetch.js.map